{% extends "base.html" %}
{% block content %}
<h1 class="mb-4 text-primary">Confirm Your Order</h1>

<div class="row g-4">
    <div class="col-lg-7">
        <div class="card shadow-sm mb-3">
            <div class="card-body">
                <h2 class="h4 mb-3">Delivery details</h2>
                <dl class="row mb-0">
                    <dt class="col-sm-4">Full name</dt>
                    <dd class="col-sm-8">{{ form.full_name }}</dd>

                    <dt class="col-sm-4">Email</dt>
                    <dd class="col-sm-8">{{ form.email }}</dd>

                    <dt class="col-sm-4">Phone</dt>
                    <dd class="col-sm-8">{{ form.phone }}</dd>

                    <dt class="col-sm-4">Address</dt>
                    <dd class="col-sm-8">
                        <div>{{ form.address }}</div>
                        <div>{{ form.city }}, {{ form.postal_code }}</div>
                    </dd>

                    <dt class="col-sm-4">Delivery</dt>
                    <dd class="col-sm-8">{{ form.delivery_method }}</dd>

                    <dt class="col-sm-4">Payment</dt>
                    <dd class="col-sm-8">{{ form.payment_method }}</dd>

                    <dt class="col-sm-4">Notes</dt>
                    <dd class="col-sm-8">{{ form.notes or '—' }}</dd>
                </dl>
            </div>
        </div>

        <div>
            <a href="/checkout" class="btn btn-outline-secondary me-2">Back and edit</a>
            <form method="post" action="/checkout/confirm" class="d-inline">
                <button type="submit" class="btn btn-success">Confirm order</button>
            </form>
        </div>
    </div>

    <div class="col-lg-5">
        <div class="card shadow-sm">
            <div class="card-body">
                <h2 class="h4 mb-3">Order summary</h2>
                <ul class="list-group mb-3">
                    {% for item in cart_items %}
                        <li class="list-group-item">
                            <div class="d-flex justify-content-between">
                                <span>
                                    {{ item.name }}
                                    <span class="text-muted"> × </span>{{ item.quantity }}
                                </span>
                                <span>{{ "{:,.2f}".format(item.subtotal) }} UAH</span>
                            </div>
                        </li>
                    {% endfor %}
                    <li class="list-group-item d-flex justify-content-between fw-semibold">
                        <span>Total items</span>
                        <span>{{ total_quantity }} pcs</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between fw-semibold">
                        <span>Total amount</span>
                        <span>{{ "{:,.2f}".format(cart_total) }} UAH</span>
                    </li>
                </ul>
                <p class="text-muted small mb-0">
                    By confirming the order you agree to the selected payment and delivery options.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
